<!-- app/templates/select_files.html -->
{% extends "base.html" %}

{% block content %}
<h2>Dateien/Ordner ausw채hlen f체r Projekt: {{ project }}</h2>

<div class="mb-3">
  <h4>Vollst채ndige Struktur:</h4>
  <pre>{{ structure_str }}</pre>
</div>

<form method="post" action="{{ url_for('full_output') }}">
    <div class="form-group">
        <!-- "Alle markieren" Checkbox -->
        <input type="checkbox" id="select_all" checked> 
        <label for="select_all">Alle markieren</label>
    </div>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Auswahl</th>
                <th>Dateipfad</th>
            </tr>
        </thead>
        <tbody>
            {% for item in flat_list %}
            <tr>
                <td>
                    <input type="checkbox" name="selected_paths" value="{{ item.filename }}" checked>
                </td>
                <td style="padding-left: {{ item.indent * 20 }}px;">
                    {{ item.filename }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" class="btn btn-primary">Gesamtausgabe anzeigen</button>
</form>
<script>
    // "Alle markieren" Checkbox steuert alle Eintr채ge
    document.getElementById('select_all').addEventListener('change', function() {
        var checkboxes = document.querySelectorAll('input[name="selected_paths"]');
        for (var checkbox of checkboxes) {
            checkbox.checked = this.checked;
        }
    });
</script>
{% endblock %}
